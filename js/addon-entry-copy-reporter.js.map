{"version":3,"file":"js/addon-entry-copy-reporter.js","sources":["webpack://GUI/./src/addons/addons/copy-reporter/style.css","webpack://GUI/./src/addons/addons/copy-reporter/copy.svg","webpack://GUI/./src/addons/addons/copy-reporter/_runtime_entry.js","webpack://GUI/./src/addons/addons/copy-reporter/userscript.js"],"sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".sa-copy-reporter-icon {\\n  cursor: pointer;\\n  float: right;\\n  display: block;\\n  user-select: none;\\n  filter: var(--editorDarkMode-accent-filter, none);\\n  width: 14px;\\n  height: 14px;\\n}\\n\\n.valueReportBox {\\n  user-select: text;\\n}\\n\", \"\"]);\n\n// exports\n","export default \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTIxLDguOTRhMS4zMSwxLjMxLDAsMCwwLS4wNi0uMjdsMC0uMDlhMS4wNywxLjA3LDAsMCwwLS4xOS0uMjhoMGwtNi02aDBhMS4wNywxLjA3LDAsMCwwLS4yOC0uMTkuMzIuMzIsMCwwLDAtLjA5LDBBLjg4Ljg4LDAsMCwwLDE0LjA1LDJIMTBBMywzLDAsMCwwLDcsNVY2SDZBMywzLDAsMCwwLDMsOVYxOWEzLDMsMCwwLDAsMywzaDhhMywzLDAsMCwwLDMtM1YxOGgxYTMsMywwLDAsMCwzLTNWOVMyMSw5LDIxLDguOTRaTTE1LDUuNDEsMTcuNTksOEgxNmExLDEsMCwwLDEtMS0xWk0xNSwxOWExLDEsMCwwLDEtMSwxSDZhMSwxLDAsMCwxLTEtMVY5QTEsMSwwLDAsMSw2LDhIN3Y3YTMsMywwLDAsMCwzLDNoNVptNC00YTEsMSwwLDAsMS0xLDFIMTBhMSwxLDAsMCwxLTEtMVY1YTEsMSwwLDAsMSwxLTFoM1Y3YTMsMywwLDAsMCwzLDNoM1oiIGZpbGw9IiM1NzVlNzUiLz48L3N2Zz4K\"","/* generated by pull.js */\nimport _js from \"./userscript.js\";\nimport _css from \"!css-loader!./style.css\";\nimport _asset from \"!url-loader!./copy.svg\";\nexport const resources = {\n  \"userscript.js\": _js,\n  \"style.css\": _css,\n  \"copy.svg\": _asset,\n};\n","export default async function ({ addon, console, msg }) {\n  addon.tab.createEditorContextMenu(\n    (ctx) => {\n      const className = ctx.type === \"monitor_large\" ? \"monitor_large-value\" : \"monitor_value\";\n      const element = ctx.target.querySelector(`[class*='${className}_']`);\n\n      if (element.innerText.length !== 0) {\n        navigator.clipboard.writeText(element.innerText);\n      }\n    },\n    {\n      className: \"copy\",\n      types: [\"monitor_default\", \"monitor_large\", \"monitor_slider\"],\n      position: \"monitor\",\n      order: 0,\n      label: msg(\"copy-value\"),\n    }\n  );\n\n  // add button to reporter bubble\n  const ScratchBlocks = await addon.tab.traps.getBlockly();\n\n  // https://github.com/scratchfoundation/scratch-blocks/blob/893c7e7ad5bfb416eaed75d9a1c93bdce84e36ab/core/workspace_svg.js#L979\n  ScratchBlocks.WorkspaceSvg.prototype.reportValue = function (id, value) {\n    let block = this.getBlockById(id);\n    if (!block) {\n      throw \"Tried to report value on block that does not exist.\";\n    }\n\n    ScratchBlocks.DropDownDiv.hideWithoutAnimation();\n    ScratchBlocks.DropDownDiv.clearContent();\n\n    let contentDiv = ScratchBlocks.DropDownDiv.getContentDiv();\n\n    let valueReportBox = document.createElement(\"div\");\n    valueReportBox.setAttribute(\"class\", \"valueReportBox\");\n    valueReportBox.innerText = value;\n    if (!addon.self.disabled) {\n      // use to get focus and event priority\n      valueReportBox.setAttribute(\"tabindex\", \"0\");\n      // if the user pressed Ctrl+C, prevent propagation to Blockly\n      valueReportBox.onkeydown = (event) => {\n        if ((event.altKey || event.ctrlKey || event.metaKey) && event.code === \"KeyC\") {\n          event.stopPropagation();\n        }\n      };\n\n      if (value.length !== 0) {\n        const copyButton = document.createElement(\"img\");\n        copyButton.setAttribute(\"role\", \"button\");\n        copyButton.setAttribute(\"tabindex\", \"0\");\n        copyButton.setAttribute(\"alt\", msg(\"copy-to-clipboard\"));\n        copyButton.setAttribute(\"src\", addon.self.getResource(\"/copy.svg\")) /* rewritten by pull.js */;\n\n        copyButton.classList.add(\"sa-copy-reporter-icon\");\n        addon.tab.displayNoneWhileDisabled(copyButton);\n\n        copyButton.onclick = () => navigator.clipboard.writeText(value);\n        valueReportBox.appendChild(copyButton);\n      }\n    }\n\n    contentDiv.appendChild(valueReportBox);\n\n    ScratchBlocks.DropDownDiv.setColour(\n      ScratchBlocks.Colours.valueReportBackground,\n      ScratchBlocks.Colours.valueReportBorder\n    );\n    ScratchBlocks.DropDownDiv.showPositionedByBlock(this, block);\n  };\n}\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAIA;AACA;AACA;;;;A","sourceRoot":""}