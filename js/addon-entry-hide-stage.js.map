{"version":3,"file":"js/addon-entry-hide-stage.js","sources":["webpack://GUI/./src/addons/addons/hide-stage/style.css","webpack://GUI/./src/addons/addons/hide-stage/icon.svg","webpack://GUI/./src/addons/addons/hide-stage/_runtime_entry.js","webpack://GUI/./src/addons/addons/hide-stage/userscript.js"],"sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".sa-hide-stage-button [class*=\\\"stage-header_stage-button-icon_\\\"] {\\n  /* Preserve aspect ratio */\\n  height: auto;\\n}\\n\\n.sa-stage-hidden [class*=\\\"blocks_blocks_\\\"] .injectionDiv,\\n.sa-stage-hidden [class*=\\\"asset-panel_wrapper_\\\"],\\n.sa-stage-hidden [class*=\\\"backpack_backpack-header_\\\"] {\\n  border-radius: 0;\\n}\\n\\n/* [class*=\\\"gui_flex-wrapper_\\\"] is for specificity over hide-flyout */\\n.sa-stage-hidden [class*=\\\"gui_flex-wrapper_\\\"] [class*=\\\"gui_stage-and-target-wrapper_\\\"],\\n.sa-stage-hidden [class*=\\\"stage-wrapper_stage-wrapper_\\\"]:not([class*=\\\"stage-wrapper_full-screen_\\\"]),\\n.sa-stage-hidden [class*=\\\"gui_target-wrapper_\\\"] {\\n  padding: 0;\\n}\\n\\n.sa-stage-hidden\\n  [class*=\\\"stage-wrapper_stage-wrapper_\\\"]:not([class*=\\\"stage-wrapper_full-screen_\\\"])\\n  [class*=\\\"controls_controls-container_\\\"],\\n.sa-stage-hidden [class*=\\\"gui_target-wrapper_\\\"] {\\n  display: none;\\n}\\n.sa-stage-hidden\\n  [class*=\\\"stage-wrapper_stage-wrapper_\\\"]:not([class*=\\\"stage-wrapper_full-screen_\\\"])\\n  [class*=\\\"stage-wrapper_stage-canvas-wrapper_\\\"] {\\n  /* can't use display: none because that causes the canvas's clientWidth/Height to become 0 which causes crashes */\\n  visibility: hidden;\\n  position: absolute;\\n  z-index: -9999;\\n  /* move the stage to avoid a horizontal scroll bar */\\n  right: 0;\\n  /* and move it up so that the mouse can't hover over the stage while its hidden */\\n  bottom: 100%;\\n}\\n[dir=\\\"rtl\\\"]\\n  .sa-stage-hidden\\n  [class*=\\\"stage-wrapper_stage-wrapper_\\\"]:not([class*=\\\"stage-wrapper_full-screen_\\\"])\\n  [class*=\\\"stage-wrapper_stage-canvas-wrapper_\\\"] {\\n  right: initial;\\n  left: 0;\\n}\\n\\n.sa-stage-hidden [class*=\\\"stage-header_stage-size-row\\\"] {\\n  position: absolute;\\n  top: 0;\\n  right: 0.5rem;\\n  height: 2.75rem;\\n  align-items: center;\\n}\\n\\n[dir=\\\"rtl\\\"] .sa-stage-hidden [class*=\\\"stage-header_stage-size-row\\\"] {\\n  right: auto;\\n  left: 0.5rem;\\n}\\n\\n.sa-stage-hidden-outer .scratchEyedropper {\\n  display: none;\\n}\\n\", \"\"]);\n\n// exports\n","export default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgc3Ryb2tlPSIjODU1Y2Q2IiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTQgNGExIDEgMCAwIDAtMSAxdjEwYTEgMSAwIDAgMCAxIDFoMTJhMSAxIDAgMCAwIDEtMVY1LjVoLTRWNFoiLz48cGF0aCBkPSJNMTMgNGgzYTEgMSAwIDAgMSAxIDF2LjVoLTR6IiBmaWxsPSIjODU1Y2Q2Ii8+PC9nPjwvc3ZnPgo=\"","/* generated by pull.js */\nimport _js from \"./userscript.js\";\nimport _css from \"!css-loader!./style.css\";\nimport _asset from \"!url-loader!./icon.svg\";\nexport const resources = {\n  \"userscript.js\": _js,\n  \"style.css\": _css,\n  \"icon.svg\": _asset,\n};\n","export default async function ({ addon, console, msg }) {\n  let stageHidden = false;\n  let bodyWrapper;\n  let smallStageButton;\n  let largeStageButton;\n  let fullStageButton;\n\n  function hideStage() {\n    stageHidden = true;\n    if (!bodyWrapper) return;\n    document.body.classList.add(\"sa-stage-hidden-outer\");\n    // Inner class is applied to body wrapper so that it won't affect the project page.\n    bodyWrapper.classList.add(\"sa-stage-hidden\");\n    hideStageButton.setAttribute(\"aria-pressed\", true);\n    if (smallStageButton) smallStageButton.setAttribute(\"aria-pressed\", false);\n    if (largeStageButton) largeStageButton.setAttribute(\"aria-pressed\", false);\n    if (fullStageButton) fullStageButton.setAttribute(\"aria-pressed\", false);\n    window.dispatchEvent(new Event(\"resize\")); // resizes the code area and paint editor canvas\n  }\n\n  function unhideStage(e) {\n    stageHidden = false;\n    if (!bodyWrapper) return;\n    document.body.classList.remove(\"sa-stage-hidden-outer\");\n    bodyWrapper.classList.remove(\"sa-stage-hidden\");\n    hideStageButton.setAttribute(\"aria-pressed\", false);\n    if (e) {\n      const clickedButton = e.target.closest(\"button\");\n      if (clickedButton) clickedButton.setAttribute(\"aria-pressed\", true);\n    } else if (addon.tab.redux.state) {\n      const selectedStageSize = addon.tab.redux.state.scratchGui.stageSize.stageSize;\n      if (smallStageButton) smallStageButton.setAttribute(\"aria-pressed\", selectedStageSize === \"small\");\n      if (largeStageButton) largeStageButton.setAttribute(\"aria-pressed\", selectedStageSize === \"large\");\n      if (fullStageButton) fullStageButton.setAttribute(\"aria-pressed\", selectedStageSize === \"full\");\n    }\n    window.dispatchEvent(new Event(\"resize\")); // resizes the code area and paint editor canvas\n  }\n\n  const hideStageButton = Object.assign(document.createElement(\"button\"), {\n    type: \"button\",\n    className: addon.tab.scratchClass(\"toggle-buttons_button\", { others: \"sa-hide-stage-button\" }),\n    title: msg(\"hide-stage\"),\n  });\n  hideStageButton.setAttribute(\"aria-label\", msg(\"hide-stage\"));\n  hideStageButton.setAttribute(\"aria-pressed\", false);\n  const hideStageIcon = Object.assign(addon.tab.recolorable(), {\n    className: addon.tab.scratchClass(\"stage-header_stage-button-icon\"),\n    src: addon.self.getResource(\"/icon.svg\") /* rewritten by pull.js */,\n    draggable: false,\n  });\n  hideStageIcon.setAttribute(\"aria-hidden\", true);\n  hideStageButton.appendChild(hideStageIcon);\n  hideStageButton.addEventListener(\"click\", hideStage);\n\n  addon.self.addEventListener(\"disabled\", () => {\n    unhideStage();\n    hideStageButton.remove();\n  });\n  addon.self.addEventListener(\"reenabled\", () => {\n    const stageControls = document.querySelector(\n      \"[class*='stage-header_stage-size-toggle-group_'] > [class*='toggle-buttons_row_']\"\n    );\n    if (stageControls) stageControls.insertBefore(hideStageButton, smallStageButton);\n  });\n\n  while (true) {\n    const stageControls = await addon.tab.waitForElement(\n      \"[class*='stage-header_stage-size-toggle-group_'] > [class*='toggle-buttons_row_']\",\n      {\n        markAsSeen: true,\n        reduxCondition: (state) => !state.scratchGui.mode.isPlayerOnly,\n      }\n    );\n    bodyWrapper = document.querySelector(\"[class*='gui_body-wrapper_']\");\n\n    const stageButtons = Array.from(stageControls.querySelectorAll(\"button\"));\n    smallStageButton = stageButtons[0];\n    largeStageButton = stageButtons.length === 3 ? stageButtons[1] : null;\n    fullStageButton = stageButtons[stageButtons.length - 1];\n\n    if (!addon.self.disabled) stageControls.insertBefore(hideStageButton, smallStageButton);\n    if (stageHidden) hideStage();\n    else unhideStage();\n\n    if (smallStageButton) smallStageButton.addEventListener(\"click\", unhideStage);\n    if (largeStageButton) largeStageButton.addEventListener(\"click\", unhideStage);\n    if (fullStageButton) fullStageButton.addEventListener(\"click\", unhideStage);\n  }\n}\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AAGA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}